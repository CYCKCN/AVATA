{% extends 'base.html' %}

{% block head %}
<style>
    #mainBody{
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        width: 100vw;
        padding: 5vh 5vw;
    }

    .main-txt{
        width: 20vw;
        height: 10vh;

        /* font-family: 'Comfortaa'; */
        font-style: normal;
        font-weight: 360;
        font-size: 8vw;
        line-height: 10vh;
        display: flex;
        align-items: center;
        letter-spacing: -0.015em;

        color: #000000;
    }

    .searchsubhead{
        font-size: 1.5vh;
        font-weight: 800;

        padding-top: 1vh;
        padding-bottom: 2vh;
    }

    .searchBox {
        width: 100%;
        height: 6vh;
        
        font-size: 2vh;
        margin: 1vh 0 2vh 0;
        padding: 0 3vw;
        border: 0.5vw solid #000;
    }

    .roomgroup{
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: flex-start;
        align-items: stretch;
    }
    .room{
        height: 30vh;
        width: 41vw;
        margin-right: 4vw;
        border-radius: 2.9vw;
        filter: drop-shadow(2px 2px 5px rgba(0, 0, 0, 0.25));
        background-color: white;
    }
    .roomimg{
        width: 100%;
        height: 80%;
        border-radius: 2.9vw 2.9vw 0 0;
    }
    .roomtext{
        width: 100%;
        height: 20%;
        padding: 2% 6%;
    }
    .roomname{
        font-size: 3.3vw;
        font-weight: 500;
    }
    .roomlift{
        font-size: 2.4vw;
        font-weight: 300;
    }
    .roomelse{
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        margin-left: auto;
        align-items: flex-end;
        position: relative;
        bottom: 80%;
    }
    .roomdate{
        position: relative;
        font-size: 2.4vw;
        font-weight: 300;
    }
    .roomtime{
        position: relative;
        font-size: 2.4vw;
        font-weight: 300;
    }

    #mainFooter{
        float: left;
        width: 100vw;
        height: 10vh;
        
        left: 0;

        border-top: 0.1vw solid #D9D9D9;
    }

    .btnAdd{
        position: relative;
        width: 20vw;
        height: 7vh;
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);

        background: #000000;
        border-radius: 3.5vh;

        font-size: 4vh;
        color: white;
    }
    .error{
        position: fixed;
        top: 0;
        left: 0;
        height: 5vh;
        width: 100vw;
        background: #ffeb99;
        text-align: center;
        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        padding-top: 1vh;
    }
    .room-empty{
        margin: auto;
        text-align: center;
        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        padding-top: 5vh;
    }

    .img_profile{
        transform: scale(10);
        position:absolute;
        margin: 15vh 0vw 0vh 104vw;
        width: 5vw;
        height: 5vh;
	}

    #btn-profile {
        opacity: 0;
        margin: -5vh 0vw 0vh 87vw;
        position:absolute;
        z-index: 100;
        width: 7vw;
        height: 7vh;

        
        background: #000000;
        border: 2px solid #000000;
        border-radius: 1vw;

        font-style: normal;
        font-weight: 500;
        font-size: 2vh;
        color: #FFFFFF;
    }

</style>

{% endblock %}

{% block content %}

<form method="post" id="admin-main" enctype="multipart/form-data">
    {% if not error=='' %}
    <div class="error">
        {{error}}
    </div>
    {% endif %}
    <div class="main">
    <!-- body -->
    <div id="mainBody">  
        <div class="main-txt">Rooms</div>
        <div class="searchsubhead">SEARCH</div>
            <input class="searchBox" type="text" placeholder="Search all rooms" name="room_id" v-model="roomid"/>
        <div class="searchsubhead">BROWSE ALL</div>
        <div class="roomgroup">
            {% if roomInfo %}
                {% for k, v in roomInfo.items() %}
                <div class="room" v-on:click="goRoom($event, {{v.name}})">
                    <img class="roomimg" src="../../static/images/test/room{{v.name}}/_basic_upload.png" />
                    <div class="roomtext">
                        <div class="roomname">Room {{v.name}}</div>
                        <div class="roomlift">{{v.lift}}</div>
                        <div class="roomelse">
                            <!--
                            <div class="roomdate">{{v.date}}</div>
                            <div class="roomtime">{{v.time}}</div>
                            -->
                            <div class="roomdate">TBA</div>
                            <div class="roomtime">TBA</div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="room-empty">Not room now! Please create one!</div>
            {% endif %}
            
        </div>
    </div>
    <!-- footer -->
    <div id="mainFooter">
        <input class="btnAdd" type="submit" name="add" value="+">
        <div class="profile">
            <input id="btn-profile" type='submit' name="profile" value="profile">
            <div class="img_profile">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.2174 20.4783C17.3359 20.4783 15 22.8142 15 25.6957V27H25.4348V25.6957C25.4348 22.8142 23.0989 20.4783 20.2174 20.4783Z" stroke="black"/>
                    <ellipse cx="20.2175" cy="15.913" rx="3.91307" ry="3.91304" stroke="black" stroke-linecap="square"/>
                </svg>
            </div>
        </div>
    </div>
    
  </div>
  <!-- auxiliary field: not show in frontend, deal with form submit to send RoomId -->
  <div id="roomId" style="display:none">
    <input id="children0" type="text" name="roomid" value="" style="display:none">
  </div>
</form>

<script>
    Vue.createApp({
      data() {
        return {
        }
      },
      delimiters: ['{[', ']}'],
      methods: {
        goRoom: function (event, roomid) {
            var form = document.getElementById("admin-main");
            var roomDiv = document.getElementById("roomId");

            roomDiv.children[0].setAttribute('value', roomid);
            console.log(roomDiv.children[0].value)
            
            form.submit();
        },
      }
    }).mount('#admin-main')    
</script>

<script>
   

</script>
{% endblock %}